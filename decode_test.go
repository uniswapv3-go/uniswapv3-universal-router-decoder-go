package uniswapv3_universal_router_decoder_go

import (
	"github.com/ethereum/go-ethereum/common/hexutil"
	"github.com/stretchr/testify/require"
	"github.com/uniswapv3-go/uniswapv3-universal-router-decoder-go/command"
	"testing"
)

func TestDecode2(t *testing.T) {
	inputs := []string{
		"0x3593564c000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000649a4ce40000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000001a1e7350d8a177dd00000000000000000000000000000000000000000000000001612682ff5a7c0100000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002b1f9840a85d5af5bf1d1762f925bdaddc4201f9840001f4b4fbf271143f4fbf7b91a5ded31805e42b2208d6000000000000000000000000000000000000000000",
		"0x3593564c000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000649ac190000000000000000000000000000000000000000000000000000000000000000101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000016345785d8a00000000000000000000000000000000000000000000000000000012ec55a96cb50000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002b1f9840a85d5af5bf1d1762f925bdaddc4201f9840001f4b4fbf271143f4fbf7b91a5ded31805e42b2208d6000000000000000000000000000000000000000000",
	}
	for i, input := range inputs {
		t.Logf("[%d] %s", i, input)
		decoded, err := hexutil.Decode(input)
		require.NoError(t, err)
		cs, err := Decode(decoded)
		require.NoError(t, err)
		for j, cc := range cs {
			t.Logf("[%d][%d] command: %x => %s", i, j, cc.Command, command.RealCommandName(cc.Command))

		}
	}
}
